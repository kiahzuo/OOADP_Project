<!DOCTYPE html>
  <html lang="en">
  
    <head>

      <style>
  
        /* Style the tab */
      .tab {
          overflow: hidden;
          border: 1px solid #ccc;
          background-color: #f1f1f1;
      
      }
      
      
      
      /* Style the buttons that are used to open the tab content */
      .tab button {
          background-color: inherit;
          float: left;
          border: none;
          outline: none;
          cursor: pointer;
          padding: 14px 16px;
          transition: 0.3s;
   
          width:758px;
      }
      
      /* Change background color of buttons on hover */
      .tab button:hover {
          background-color: #ddd;
      }
      
      /* Create an active/current tablink class */
      .tab button.active {
          background-color: #ccc;
      }
      
      /* Style the tab content */
      .tabcontent {
          display: none;
          padding: 6px 12px;
          border: 1px solid #ccc;
          border-top: none;
      }


      body{background-color: lightgoldenrodyellow;}
      #myInput {
    background-image: url('/css/searchicon.png'); /* Add a search icon to input */
    background-position: 10px 12px; /* Position the search icon */
    background-repeat: no-repeat; /* Do not repeat the icon image */
    width: 100%; /* Full-width */
    font-size: 16px; /* Increase font-size */
    padding: 12px 20px 12px 40px; /* Add some padding */
    border: 1px solid #ddd; /* Add a grey border */
    margin-bottom: 12px; /* Add some space below the input */
}

#myTable {
    border-collapse: collapse; /* Collapse borders */
    width: 100%; /* Full-width */
    border: 1px solid #ddd; /* Add a grey border */
    font-size: 18px; /* Increase font-size */
}

#myTable th, #myTable td {
    text-align: left; /* Left-align text */
    padding: 12px; /* Add padding */
}

#myTable tr {
    /* Add a bottom border to all table rows */
    border-bottom: 1px solid #ddd; 
}

#myTable tr.header, #myTable tr:hover {
    /* Add a grey background color to the table header and on hover */
    background-color: #f1f1f1;
}

tr{
  height: 60px;

}


      </style>
        <% include ../partials/head %>
  
        <link rel="stylesheet" type="text/css" href="../../stylesheets/util.css">
        <link rel="stylesheet" type="text/css" href="../../stylesheets/main.css">
    </head>
  

          </head>
  
  
          <body>


            <% include ../partials/header %>


    <br>    <br>    <br>    <br>    <br>

    <div class="tab">
      <button class="tablinks" onclick="openCity(event, 'London')" id="defaultOpen">View All </button>
      <button class="tablinks" onclick="openCity(event, 'Paris')">Add Genre</button>
    </div>
    <br>

    <a href="http://localhost:3000/profile" class="btn btn-primary">Back</a>
    
    <!-- Tab content -->
    <div id="London" class="tabcontent">

      <div class="container">
        <br> <br> <br> <br>
        <input type="text" id="myInput" onkeyup="myFunction()" placeholder="Search for names.." title="Type in a name">
  
        <table id="myTable">
          <tr class="header">
            <th style="width:60%;">Genre</th>
            <th style="width:40%;"></th>
          </tr>
  
          <% for (i =0; i < genre.length; i++) {%>
          <tr class="rowRecord" data-id="<%= genre[i].id %>">
            <td><%= genre[i].genre %></td>
            <td> <input type="button" class="deleteBtnGenre"  value="Delete"></td>
          </tr>
          <% } %>
        
        </table>
      </div>
    </div>
    
    <div id="Paris" class="tabcontent">

      <div class ='aligning'>
        <form action="/genre" method="post">
          <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
              </button>
              <h4 class="modal-title" id="myModalLabel">Add New Category</h4>
          </div>
    
          <div class="modal-body">
    
              <fieldset class="form-group">
                  <label for="inputitle">Insert Genre</label>
              </fieldset>
              <fieldset class="form-group">
    
                  <input type="text" id="genre" name="genre" class="form-control" placeholder="Insert a Genre...."  required="" ><br> 
                  
                
              
              </fieldset>
    
              <div class="modal-footer">
                <button type="submit" class="btn btn-primary">Save changes</button>
            </div>
          </div>
         
      </form>
    </div>
    </div>
    
  


<style>
  button{

  }
</style>


  </div>

  <br>
  <br>




      <script>
$('.deleteBtnGenre').click(function () {
var genre_num = $(this).closest("tr").data('id');
$.ajax({
url: '<%-urlPath%>/' + genre_num,
type: 'DELETE',
success: function (result) {
  console.log(result.message);
  var itemToRemove = '.rowRecord[data-id=' + genre_num + ']';
  $(itemToRemove).remove();
},
error: function (result) {
  alert("Unable to delete student record.");
  console.log(result.message);
}
});
});



function openCity(evt, cityName) {
    // Declare all variables
    var i, tabcontent, tablinks;

    // Get all elements with class="tabcontent" and hide them
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
    }

    // Get all elements with class="tablinks" and remove the class "active"
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
    }

    // Show the current tab, and add an "active" class to the button that opened the tab
    document.getElementById(cityName).style.display = "block";
    evt.currentTarget.className += " active";
}


// Get the element with id="defaultOpen" and click on it
document.getElementById("defaultOpen").click();
      
      </script>


      <style>
          body{
              background-color: lightgoldenrodyellow;
          }
          * {
            box-sizing: border-box;
          }

          .aligning{
            margin-left: 165px;
            
          }

          #genre{
            background-image: url('/css/searchicon.png');
            background-position: 10px 10px;
            background-repeat: no-repeat;
            width: 1170px;
            font-size: 16px;
            padding: 12px 20px 12px 40px;
            border: 1px solid #ddd;
            margin-bottom: 12px;
          }
          
          #myInput  {
            background-image: url('/css/searchicon.png');
            background-position: 10px 10px;
            background-repeat: no-repeat;
            width: 100%;
            font-size: 16px;
            padding: 12px 20px 12px 40px;
            border: 1px solid #ddd;
            margin-bottom: 12px;
          }
          
          #myTable {
            border-collapse: collapse;
            width: 100%;
            border: 1px solid #ddd;
            font-size: 18px;
          }
          
          #myTable th, #myTable td {
            text-align: left;
            padding: 12px;
          }
          
          #myTable tr {
            border-bottom: 1px solid #ddd;
          }
          
          #myTable tr.header, #myTable tr:hover {
            background-color: #f1f1f1;
          }
          </style>

<script>
  function myFunction() {
    // Declare variables 
    var input, filter, table, tr, td, i;
    input = document.getElementById("myInput");
    filter = input.value.toUpperCase();
    table = document.getElementById("myTable");
    tr = table.getElementsByTagName("tr");
  
    // Loop through all table rows, and hide those who don't match the search query
    for (i = 0; i < tr.length; i++) {
      td = tr[i].getElementsByTagName("td")[0];
      if (td) {
        if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
          tr[i].style.display = "";
        } else {
          tr[i].style.display = "none";
        }
      } 
    }
  }
  </script>

</body>
