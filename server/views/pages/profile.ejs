<!DOCTYPE html>

<html lang="en">

<head>

    <% include ../partials/head %>

    <link rel="stylesheet" type="text/css" href="../../stylesheets/util.css">
    <link rel="stylesheet" type="text/css" href="../../stylesheets/main.css">

  
    <% if (user.role =="ADMIN") { %>
      <style>
        * {
          box-sizing: border-box
        }

        body {
          background-color: lightgoldenrodyellow;
        }

        /* Style the tab */

        .tab {
          float: left;
          border: 1px solid #ccc;
          background-color: #31353d;
          width: 15%;
          height: 100%;
        }

        /* Style the buttons inside the tab */

        .tab button {
          display: block;
          background-color: inherit;
          color: white;
          padding: 22px 16px;
          width: 100%;
          border: none;
          outline: none;
          text-align: left;
          cursor: pointer;
          transition: 0.3s;
          font-size: 17px;
        }

        /* Change background color of buttons on hover */

        .tab button:hover {
          background-color: #ddd;
        }

        /* Create an active/current "tab button" class */

        .tab button.active {
          background-color: #ccc;
        }

        /* Style the tab content */

        .tabcontent {
          float: left;
          padding: 0px 12px;
          border: 1px solid #ccc;
          width: 85%;
          border-left: none;
          height: 100%;
          background-color: lightgoldenrodyellow;
        }


        .card {
          background-color: lightgray;
          width: 300px;
          height: 500px;
          margin-left: 150px;

        }

        .btn {
          display: inline-block;
        }

        .coloring {
          background-color: burlywood;
        }

        .card-img-top {
          width: 100%;
          height: 250px;
        }

        .btn-grey {
          background-color: #D8D8D8;
          color: #FFF;
        }

        .rating-block {
          background-color: #FAFAFA;
          border: 1px solid #EFEFEF;
          padding: 15px 15px 20px 15px;
          border-radius: 3px;
        }

        .bold {
          font-weight: 700;
        }

        .padding-bottom-7 {
          padding-bottom: 7px;


        }

        .card-title {
          margin-left: 2%;
        }

        .card-text {
          margin-left: 2%;
        }

        .card-img-top1 {
          height: 250px;
          width: 50%;
          margin: auto
        }

        a.button {
          -webkit-appearance: button;
          -moz-appearance: button;
          appearance: button;

          text-decoration: none;
          color: initial;
        }

        #nextBtn,
        #prevBtn {
          background-color: #4CAF50;
          border: none;
          color: white;
          padding: 12px;
          text-align: center;
          text-decoration: none;
          display: inline-block;
          font-size: 16px;
          margin: 4px 2px;
          border-radius: 12px;
        }

        .card-body {
          height: 170px;
        }


        .profilepic {
          border-radius: 70%;
          width: 150px;
          height: 150px;
        }



        #myInput {
          background-image: url('/css/searchicon.png');
          background-position: 10px 10px;
          background-repeat: no-repeat;
          width: 1200px;
          font-size: 16px;
          padding: 12px 20px 12px 40px;
          border: 1px solid #ddd;
          margin-bottom: 12px;
        }

        #myTable {
          border-collapse: collapse;
          width: 100%;
          border: 1px solid #ddd;
          font-size: 18px;
        }

        #myTable th,
        #myTable td {
          text-align: left;
          padding: 12px;
        }

        #myTable tr {
          border-bottom: 1px solid #ddd;
        }

        #myTable tr.header,
        #myTable tr:hover {
          background-color: #f1f1f1;
        }

        .table1 {
          margin-left: 60px;

        }

        .dropdown-container {
          display: none;
          background-color: #262626;
          padding-left: 8px;
        }

        .sidenav a,
        .dropdown-btn {
          padding: 6px 8px 6px 16px;
          text-decoration: none;
          font-size: 20px;
          color: #818181;
          display: block;
          border: none;
          background: none;
          width: 100%;
          text-align: left;
          cursor: pointer;
          outline: none;
        }
      </style>

      <style>
    formx {
        margin: 20px auto;
        width: 420px;
    }
    .form-row {
        padding: 5px 10px;
    }
    label {
        display: block;
        margin: 3px 0;
    }
    .form-row input {
        padding: 3px 1px;
        width: 100%;
    }
    input.currency {
        text-align: right;
        padding-right: 15px;
    }
    .input-group .form-control {
        float: none;
    }
    .input-group .input-buttons {
        position: relative;
        z-index: 3;
    }
        </style>
</head>


<body>

  <% include ../partials/header %>

    <p>Click on the buttons inside the tabbed menu:</p>
    <br>
    <br>
    <br>

    <div class="tab">
      <button class="tablinks" onclick="openCity(event, 'View')" id="defaultOpen">View All Books</button>
      <button class="tablinks" onclick="openCity(event, 'Tokyo')">Upload New Book</button>
      <button class="tablinks" onclick="openCity(event, 'User')">User Management</button>
      <div class="sidenav">

        <button class="dropdown-btn">Features
          <i class="fa fa-caret-down"></i>
        </button>
        <div class="dropdown-container">
          <a href="/genre">Genre Management</a>
          <a href="/reportitem">Reported Items</a>
          <a href="http://localhost:3000/bank">Bank</a>
          <a href="http://localhost:3000/usermanagement">Users Roles</a>
        </div>
      </div>

      <br>
      <br>
      <a href="/logout" class="btn btn-danger">Logout</a>
      <br>
      <br>



    </div>

    <div id="View" class="tabcontent">
      <br>


      <div class="col-sm-6 col-md-8 col-lg-9 p-b-50">


        <div class="container">

          <div class="row">



            <input type="text" id="myInput" class="table1" onkeyup="myFunction()" placeholder="Search for names.." title="Type in a name">

            <table id="myTable" class="table1">
              <tr>
                <th style="width:20%;">Seller</th>
                <th style="width:20%;">Title</th>
                <th style="width:20%;">Availability</th>
                <th style="width:20%;">Price</th>
                <th style="width:10%;">Edit</th>
                <th style="width:10%;">Delete</th>
              </tr>
              <% for (i =0; i < images.length; i++) {%>
                <tr class="rowRecord" data-id="<%= images[i].id %>">
                  <td>
                    <%= images[i].seller %>
                  </td>
                  <td>
                    <%= images[i].title %>
                  </td>
                  <td>
                    <%= images[i].available %>
                  </td>
                  <td>
                    <%= images[i].price %>
                  </td>
                  <td>
                    <a class='btn btn-primary' href="/edit/<%= images[i].id%>">Edit Book</a>
                  </td>
                  <td>
                    <input type="button" class="deleteBtn" value="Delete">
                  </td>
                </tr>
                <% } %>

            </table>
          </div>
        </div>
      </div>



    </div>

    <script>
      $('.deleteBtn').click(function () {
        var booknumber = $(this).closest("tr").data('id');
        $.ajax({
          url: 'http://localhost:3000/profile/' + booknumber,
          type: 'DELETE',
          success: function (result) {
            console.log(result.message);
            var itemToRemove = '.rowRecord[data-id=' + booknumber + ']';
            $(itemToRemove).remove();
            alert("Record Deleted Successfully.");
          },
          error: function (result) {
            alert("Unable to delete record.");
            console.log(result.message);
          }
        });
      });



      function myFunction() {
        var input, filter, table, tr, td, i;
        input = document.getElementById("myInput");
        filter = input.value.toUpperCase();
        table = document.getElementById("myTable");
        tr = table.getElementsByTagName("tr");
        for (i = 0; i < tr.length; i++) {
          td = tr[i].getElementsByTagName("td")[0];
          if (td) {
            if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
              tr[i].style.display = "";
            } else {
              tr[i].style.display = "none";
            }
          }
        }
      }

      var dropdown = document.getElementsByClassName("dropdown-btn");
      var i;

      for (i = 0; i < dropdown.length; i++) {
        dropdown[i].addEventListener("click", function () {
          this.classList.toggle("active");
          var dropdownContent = this.nextElementSibling;
          if (dropdownContent.style.display === "block") {
            dropdownContent.style.display = "none";
          } else {
            dropdownContent.style.display = "block";
          }
        });
      }
    </script>

    <div id="Paris" class="tabcontent">

      <br>

      <form action="/genre" method="post">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
          <h4 class="modal-title" id="myModalLabel">Add New Category</h4>
        </div>

      </form>
    </div>



    <div id="User" class="tabcontent">
      <br>
      <br>
      <br>
      <br>
      <input type="text" id="myInput" onkeyup="myFunction()" placeholder="Search for names.." title="Type in a name">
      <table class="table" id="myTable">
        <thread>
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Email</th>
            <th>Action</th>
          </tr>
          <% for(var i=0; i < users.length; i++){ %>
            <tr class="rowRecord" data-id="<%= users[i].id %>">
              <td>
                <%= users[i].id %>
              </td>
              <td>
                <%= users[i].name %>
              </td>
              <td width="50%">
                <%= users[i].email %>
              </td>
              <td width="10%">
                <input type="button" class="deleteBtn" value="Ban">
              </td>
            </tr>
            <% } %>
        </thread>
      </table>
      <script>
        function myFunction() {
          var input, filter, table, tr, td, i;
          input = document.getElementById("myInput");
          filter = input.value.toUpperCase();
          table = document.getElementById("myTable");
          tr = table.getElementsByTagName("tr");
          for (i = 0; i < tr.length; i++) {
            td = tr[i].getElementsByTagName("td")[1];
            if (td) {
              if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
                tr[i].style.display = "";
              } else {
                tr[i].style.display = "none";
              }
            }
          }
        }
      </script>
    </div>

    <div id="Tokyo" class="tabcontent">

      <form action="/store" method="post" enctype="multipart/form-data" id="regForm">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
          <h4 class="modal-title" id="myModalLabel">Upload A Book</h4>
        </div>

        <div class="modal-body">






          <!-- One "tab" for each step in the form: -->


          <input type="text" id="itle" name="title" class="form-control" placeholder="Image Title..." required="">
          <br>
          <div class="form-row">
            <div class="input-group hide-inputbtns"> 
                <span class="input-group-addon">$</span>
                <input type="number" id="price" name="price" value="0" min="1" step="0.01" data-number-to-fixed="2" data-number-stepfactor="100" class="form-control currency" placeholder="Price..." required=""/>
            </div>
          </div>
          <br>

          <input type="text" id="condition" name="condition" class="form-control" placeholder="Condition..." required="">
          <br>





          <select id="genre" name="genre" class="form-control" placeholder="genre" required="">
            <br>
            <% for (i =0; i < genre.length; i++) {%>
              <option value="<%= genre[i].genre %>">
                <%= genre[i].genre %>
              </option>


              <% } %>
          </select>
          <br>
          <textarea id="description" name="description" class="form-control" placeholder="Description..." required=""></textarea>
          <br>
          <input type="text" id="meetup" name="meetup" class="form-control" placeholder="Meetup Details" required="">
          <br>





          <select hidden id="available" name="available" class="form-control" readonly placeholder="available" required="">
            <br>
            <option value="available">available</option>

          </select>
          <br>
          <label for="itle">Add a picture</label>
          <input type="file" id="image" name="image" required>
          <span class="file-custom"></span>



          <div style="overflow:auto;">
            <div style="float:right;">
              <button type="submit" class="btn btn-primary">Confirm</button>
            </div>
          </div>

          <!-- Circles which indicates the steps of the form: -->
          <div style="text-align:center;margin-top:40px;">
            <span class="step"></span>
            <span class="step"></span>
            <span class="step"></span>
          </div>

      </form>


      </div>

      <!-- Need to make some code for ADMIN clicking on cart... (ADMIN shouldn't have cart?) -->

      <% include ../partials/footer %>

      <% include ../partials/foot %>

          <script>
            function openCity(evt, cityName) {
              var i, tabcontent, tablinks;
              tabcontent = document.getElementsByClassName("tabcontent");
              for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
              }
              tablinks = document.getElementsByClassName("tablinks");
              for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
              }
              document.getElementById(cityName).style.display = "block";
              evt.currentTarget.className += " active";
            }

            // Get the element with id="defaultOpen" and click on it
            document.getElementById("defaultOpen").click();
          </script>
</body>

<%} else {%>

  <style>
    #regForm {
      background-color: #ffffff;
      margin: 100px auto;
      padding: 40px;
      width: 100%;
      min-width: 300px;
    }

    /* Style the input fields */

    input {
      padding: 10px;
      width: 100%;
      font-size: 17px;
      font-family: Raleway;
      border:2px solid #060606;
    }

    /* Mark input boxes that gets an error on validation: */

    input.invalid {
      background-color: #ffdddd;
    }

    /* Hide all steps by default: */

    .tab {
      display: none;
    }

    /* Make circles that indicate the steps of the form: */

    .step {
      height: 15px;
      width: 15px;
      margin: 0 2px;
      background-color: #bbbbbb;
      border: none;
      border-radius: 50%;
      display: inline-block;
      opacity: 0.5;
    }

    /* Mark the active step: */

    .step.active {
      opacity: 1;
    }

    /* Mark the steps that are finished and valid: */

    .step.finish {
      background-color: #4CAF50;
    }




    .card {
      background-color: lightgray;

    }

    .btn {
      display: inline-block;
    }

    .coloring {
      background-color: burlywood;
    }

    .card-img-top {
      width: 100%;
      height: 250px;
    }

    .btn-grey {
      background-color: #D8D8D8;
      color: #FFF;
    }

    .rating-block {
      background-color: #FAFAFA;
      border: 1px solid #EFEFEF;
      padding: 15px 15px 20px 15px;
      border-radius: 3px;
    }

    .bold {
      font-weight: 700;
    }

    .padding-bottom-7 {
      padding-bottom: 7px;


    }

    .card-title {
      margin-left: 2%;
    }

    .card-text {
      margin-left: 2%;
    }

    .card-img-top1 {
      height: 250px;
      width: 50%;
      margin: auto
    }

    a.button {
      -webkit-appearance: button;
      -moz-appearance: button;
      appearance: button;

      text-decoration: none;
      color: initial;
    }

    #nextBtn,
    #prevBtn {
      background-color: #4CAF50;
      border: none;
      color: white;
      padding: 12px;
      text-align: center;
      text-decoration: none;
      display: inline-block;
      font-size: 16px;
      margin: 4px 2px;
      border-radius: 12px;
    }

    .card-body {
      height: 170px;
    }


    .profilepic {
      border-radius: 70%;
      width: 150px;
      height: 150px;
    }
  </style>

    <style>
    form {
        margin: 20px auto;
        width: 420px;
    }
    .form-row {
        padding: 5px 10px;
    }
    label {
        display: block;
        margin: 3px 0;
    }
    .form-row input {
        padding: 3px 1px;
        width: 100%;
    }
    input.currency {
        text-align: right;
        padding-right: 15px;
    }
    .input-group .form-control {
        float: none;
    }
    .input-group .input-buttons {
        position: relative;
        z-index: 3;
    }

        </style>
  </head>

  <body> 
    <br> <br> <br> <br> 
  <% include ../partials/header %>

  <div class="container">

    <!-- Modal -->
    <div class="modal fade" id="createImage" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <form action="/store" method="post" enctype="multipart/form-data" id="regForm">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
              <h4 class="modal-title" id="myModalLabel">Upload A Book</h4>
            </div>

            <div class="modal-body">






              <!-- One "tab" for each step in the form: -->
              <div class="tab">
                <h3>Book Information</h3>
                <br>
                <br>

                <input type="text" id="itle" name="title" class="form-control" placeholder="Image Title..." required="">
                <br>
            
           

                <input type="text" id="condition" name="condition" class="form-control" placeholder="Condition..." required="">
                <br>

                <div class="form-row">
                    <div class="input-group hide-inputbtns"> 
                        <span class="input-group-addon">$</span>
                        <input type="number" id="price" name="price" value="0" min="1" step="0.01" data-number-to-fixed="2" data-number-stepfactor="100" class="form-control currency" placeholder="Price..." required=""/>
                    </div>
                </div>
                <br>



                <h3>You will recieve</h3>
                <div class="input-group hide-inputbtns"> 
                    <span class="input-group-addon">$</span>
                    <input type="number" id="price" name="price" value="0" min="1" step="0.01" data-number-to-fixed="2" data-number-stepfactor="100" class="form-control currency" placeholder="You will recieve..." readonly/>
                </div>
              </div>





              <div class="tab">
                <h3>Miscellaneous</h3>
                <br>
                <br>



                <select id="genre" name="genre" class="form-control" placeholder="genre" required="">
                  <br>
                  <% for (i =0; i < genre.length; i++) {%>
                    <option value="<%= genre[i].genre %>">
                      <%= genre[i].genre %>
                    </option>


                    <% } %>
                </select>
                <br>
                <textarea id="description" name="description" class="form-control" placeholder="Description..." required=""></textarea>
                <br>
                <input type="text" id="meetup" name="meetup" class="form-control" placeholder="Meetup Details" required="">
                <br>

              </div>

              <div class="tab">
                <h3>Add Picture</h3>
                <br>
                <br>

                <select hidden id="available" name="available" class="form-control" readonly placeholder="available" required="">
                  <br>
                  <option value="available">available</option>

                </select>
                <br>
                <label for="itle">Add a picture</label>
                <input type="file" id="image" name="image" required>
                <span class="file-custom"></span>

              </div>

              <div style="overflow:auto;">
                <div style="float:right;">
                  <button type="button" id="prevBtn" onclick="nextPrev(-1)">Previous</button>
                  <button type="button" id="nextBtn" onclick="nextPrev(1)">Next</button>
                </div>
              </div>

              <!-- Circles which indicates the steps of the form: -->
              <div style="text-align:center;margin-top:40px;">
                <span class="step"></span>
                <span class="step"></span>
                <span class="step"></span>
              </div>

          </form>
          </div>
        </div>
      </div>
      <hr>


      </p>
    </div>
  </div>
  </div>
  </div>
  </div>
  </div>

  <% include ../partials/cart %>
    <!-- multi step form -->
    <script>
      var currentTab = 0; // Current tab is set to be the first tab (0)
      showTab(currentTab); // Display the current tab

      function showTab(n) {
        // This function will display the specified tab of the form ...
        var x = document.getElementsByClassName("tab");
        x[n].style.display = "block";
        // ... and fix the Previous/Next buttons:
        if (n == 0) {
          document.getElementById("prevBtn").style.display = "none";
        } else {
          document.getElementById("prevBtn").style.display = "inline";
        }
        if (n == (x.length - 1)) {
          document.getElementById("nextBtn").innerHTML = "Submit";
        } else {
          document.getElementById("nextBtn").innerHTML = "Next";
        }
        // ... and run a function that displays the correct step indicator:
        fixStepIndicator(n)
      }

      function nextPrev(n) {
        // This function will figure out which tab to display
        var x = document.getElementsByClassName("tab");
        // Exit the function if any field in the current tab is invalid:
        if (n == 1 && !validateForm()) return false;
        // Hide the current tab:
        x[currentTab].style.display = "none";
        // Increase or decrease the current tab by 1:
        currentTab = currentTab + n;
        // if you have reached the end of the form... :
        if (currentTab >= x.length) {
          //...the form gets submitted:
          document.getElementById("regForm").submit();
          return false;
        }
        // Otherwise, display the correct tab:
        showTab(currentTab);
      }

      function validateForm() {
        // This function deals with validation of the form fields
        var x, y, i, valid = true;
        x = document.getElementsByClassName("tab");
        y = x[currentTab].getElementsByTagName("input");
        // A loop that checks every input field in the current tab:
        for (i = 0; i < y.length; i++) {
          // If a field is empty...
          if (y[i].value == "") {
            // add an "invalid" class to the field:
            y[i].className += " invalid";
            // and set the current valid status to false:
            valid = false;
          }
        }
        // If the valid status is true, mark the step as finished and valid:
        if (valid) {
          document.getElementsByClassName("step")[currentTab].className += " finish";
        }
        return valid; // return the valid status
      }

      function fixStepIndicator(n) {
        // This function removes the "active" class of all steps...
        var i, x = document.getElementsByClassName("step");
        for (i = 0; i < x.length; i++) {
          x[i].className = x[i].className.replace(" active", "");
        }
        //... and adds the "active" class to the current step:
        x[n].className += " active";
      }
    </script>

    <!-- delete -->






    </div>
    <!-- /.row -->

    </div>
    <!-- /.container -->
    <!-- Content page -->
    <section class="bgwhite p-t-55 p-b-65">
      <div class="container">
        <div class="row">
          <div class="col-sm-6 col-md-4 col-lg-3 p-b-50">
            <div class="leftbar p-r-20 p-r-0-sm">
              <!--  -->


              <ul class="p-b-54">
                <h4 class="card-title">Profile</h4>
                <h6 class="card-text">
                  <img class='profilepic' src="https://img.kpopmap.com/2018/04/twice-momo-earphone-cover.jpg" alt="Avatar">
                  <br>
                  <br>
                  <strong>Name</strong>:
                  <%= user.name %>
                    <br>
                    <br>
                    <strong>Email</strong>:
                    <%= user.email %>
                      <br>
                      <br>
                      <strong>Joined</strong>:
                      <%= user.createdAt %>
                        <br>
                        <br>
                </h6>
              </ul>
              <a href="/logout" class="btn btn-danger">Logout</a>


              <!--  -->



              <div class="filter-price p-t-22 p-b-50 bo3">





              </div>




            </div>
          </div>

          <div class="col-sm-6 col-md-8 col-lg-9 p-b-50">
            <!--  -->
            <div class="flex-sb-m flex-w p-b-35">
              <div class="flex-w">
                <div class="rs2-select2 bo4 of-hidden w-size12 m-t-5 m-b-5 m-r-10">
                  <form action="/profile" method="POST" onchange="checkAndSubmit()" id="formID">
                    <select class="sort" name="sort" id="sort">
                      <option value="All">Price</option>
                      <option value="low">Low to High</option>
                      <option value="high">High to Low</option>
                    </select>

                  </form>
                </div>

                <div class="rs2-select2 bo4 of-hidden w-size12 m-t-5 m-b-5 m-r-10">
                  <form action="/profile" method="post" onchange="checkAndSubmit2()" id="formID2">
                    <select class="sort" name="sort" id="sort2">
                      <option value="All">Genre</option>
                      <% for (i =0; i < genre.length; i++) {%>

                        <option value="<%= genre[i].genre %>">
                          <%= genre[i].genre %>
                        </option>


                        <% } %>
                    </select>


                  </form>
                </div>

                <button type="button" class="btn btn-secondary pull-right" data-toggle="modal" data-target="#createImage">
                  List an Item !
                </button>
              </div>


            </div>


            <script>
              function clicked(e) {
                if (!confirm('Are you sure?')) e.preventDefault();
              }
            </script>

            <!-- Product -->
            <div class="row">

              <div class="container">

                <div class="row">

                  <% for (i =0; i < images.length; i++) {%>
                    <% if (user.id == images[i].user_id) { %>

                      <div class="col-lg-4 col-md-6 mb-4">

                        <div class="card h-100" data-id="<%= images[i].id %>">

                          <a href="/viewbook/<%= images[i].id%>">
                            <img class="card-img-top" src="images/<%= images[i].imageName %>" alt="">
                          </a>
                          <div class="card-body">
                            <h4 class="card-title">
                              <h4>
                                <strong>
                                  <%= images[i].title %>
                                </strong>
                                </h5>
                              </h4>
                              <h5>$
                                <%= images[i].price %>
                              </h5>



                              <br>



                              <h5>Avaliability :
                                <strong>
                                  <%= images[i].available %>
                                </strong>
                              </h5>
                              <br>

                          </div>


                          <br>
                          <% if (images[i].available != "Suspended") { %>
                          <a class='btn btn-primary' href="/edit/<%= images[i].id%>">Edit Book</a>
                          <input type="button" class="deleteBtn" value="Delete" onclick="clicked(event)">
                          <%} else{%>
                            <button type="button" disabled>Suspended For Investigation</button>

                          <% } %>


                     


                        </div>

                      </div>


                      <% } %>


                        <% } %>

                          <script>
                            $('.deleteBtn').click(function () {
                              var booknumber = $(this).closest("div").data('id');
                              $.ajax({
                                url: 'http://localhost:3000/profile/' + booknumber,
                                type: 'DELETE',
                                success: function (result) {
                                  console.log(result.message);
                                  var itemToRemove = '.card[data-id=' + booknumber + ']';
                                  $(itemToRemove).remove();
                                  alert("Record Deleted Successfully.");
                                },
                                error: function (result) {
                                  alert("Unable to delete record.");
                                  console.log(result.message);
                                }
                              });
                            });


                            function checkAndSubmit2() {
                              if (document.getElementById('sort2').selectedIndex > 0) {
                                document.getElementById('formID2').submit();

                              }
                            }


                            function checkAndSubmit() {
                              if (document.getElementById('sort').selectedIndex > 0) {
                                document.getElementById('formID').submit();

                              }
                            }
                          </script>
                          </ul>

                          <!-- Footer -->
                          <% include ../partials/footer %>


                            <!-- Custom scripts -->
        
                            
                            <% include ../partials/foot %>

                </body>


        <% } %>

</html>